# Plan: Project Setup for Obsidian File Template Plugin

## Overview

Set up the development environment for the Obsidian plugin using TypeScript, React, Yarn, Jest, and esbuild.

---

## Phase 1: Initialize Project

- [x] Initialize yarn project with `yarn init`
- [x] Create `.gitignore` file for node_modules, build artifacts, etc.

---

## Phase 2: Install Dependencies

### Production Dependencies
- [x] Install `obsidian` (Obsidian API types - as dev dependency)
- [x] Install `react` and `react-dom` for UI components

### Development Dependencies
- [x] Install `typescript` for type checking
- [x] Install `esbuild` for building the plugin
- [x] Install `jest` and `ts-jest` for testing
- [x] Install `@types/react` and `@types/react-dom` for React types
- [x] Install `@types/jest` for Jest types
- [x] Install `@testing-library/react` and `@testing-library/jest-dom` for React testing

---

## Phase 3: Configure TypeScript

- [x] Create `tsconfig.json` with appropriate settings:
  - Target ES6/ES2018 for Obsidian compatibility
  - Enable JSX for React
  - Enable strict mode
  - Configure module resolution
  - Set up path aliases if needed

---

## Phase 4: Configure Build System (esbuild)

- [x] Create `esbuild.config.mjs` for development and production builds
- [x] Configure esbuild to:
  - Bundle TypeScript and TSX files
  - Externalize `obsidian` module
  - Output to `main.js`
  - Support hot reload during development
- [x] Add build scripts to `package.json`:
  - `yarn build` - production build
  - `yarn dev` - development build with watch mode

---

## Phase 5: Configure Jest for Testing

- [x] Create `jest.config.js` with TypeScript support
- [x] Configure Jest to:
  - Use `ts-jest` transformer
  - Handle TSX files
  - Mock Obsidian API
  - Set up test environment (jsdom for React)
- [x] Create `__mocks__/obsidian.ts` for mocking Obsidian API
- [x] Add test scripts to `package.json`:
  - `yarn test` - run tests
  - `yarn test:watch` - run tests in watch mode
  - `yarn test:coverage` - run tests with coverage

---

## Phase 6: Create Plugin Structure

- [x] Create `src/` directory structure:
  ```
  src/
  ├── main.ts           # Plugin entry point
  ├── types.ts          # TypeScript interfaces
  ├── settings/         # Settings components
  ├── modals/           # Modal components
  ├── services/         # Business logic
  └── utils/            # Utility functions
  ```
- [x] Create basic `src/main.ts` with plugin skeleton
- [x] Create `src/types.ts` with initial type definitions

---

## Phase 7: Obsidian Plugin Files

- [x] Create `manifest.json` with plugin metadata:
  - id, name, version, description
  - minAppVersion
  - author information
- [x] Create `versions.json` for version tracking
- [x] Create `styles.css` placeholder for plugin styles

---

## Phase 8: Development Workflow Setup

- [x] Add `package.json` scripts for common workflows:
  - `yarn build` - production build
  - `yarn dev` - development with watch
  - `yarn test` - run tests
  - `yarn lint` - run linter (optional: ESLint)
- [x] Verify build produces valid `main.js`

---

## Expected Final Structure

```
ObsidianNewNoteTemplate/
├── .gitignore
├── CLAUDE.md
├── README.md
├── Claude/
│   ├── Plans/
│   ├── Research/
│   └── Specs/
├── manifest.json
├── versions.json
├── styles.css
├── package.json
├── yarn.lock
├── tsconfig.json
├── jest.config.js
├── esbuild.config.mjs
├── __mocks__/
│   └── obsidian.ts
└── src/
    ├── main.ts
    ├── types.ts
    ├── settings/
    ├── modals/
    ├── services/
    └── utils/
```

---

## Verification Checklist

- [x] `yarn build` completes without errors
- [x] `yarn test` runs successfully (5 tests passing)
- [x] `main.js` is generated in project root
- [ ] Plugin can be loaded in Obsidian test vault (manual verification)

---

## Notes

- The plugin targets Obsidian API version 1.0.0+
- React 19 is installed for UI components
- esbuild is preferred over webpack for faster builds
- Jest with ts-jest provides TypeScript testing support
